<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Data Viewer</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> <!-- Adding Roboto font -->
    <style>
        body {
            background-color: #f4f4f4; /* Light grey background for a softer look */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Roboto', sans-serif; /* Apply Roboto font */
        }
        .parent {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            width: 80vw;
            height: 80vh;
            gap: 10px;
        }
        .div1, .div2, .div3, .div4, .div5 {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            border-radius: 10px; /* Adding border-radius for softer edges */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 6px 20px rgba(0, 0, 0, 0.1); /* Adding shadows */
        }
        .div1 { 
            grid-area: 2 / 4 / 5 / 6; 
            background-color: #b3e5fc; /* Lighter blue for a calming effect */
        }
        .div2 { 
            grid-area: 1 / 1 / 2 / 3; 
            background-color: #aed581; /* Soft green to indicate positivity without overwhelming */
        }
        .div3 { 
            grid-area: 5 / 1 / 6 / 2; 
            background-color: #ffcdd2; /* Soft red for a gentle alert */
        }
        .div4 { 
            grid-area: 3 / 1 / 5 / 3; 
            background-color: #c5cae9; /* Light purple for a touch of sophistication */
        }
        .div5 { 
            grid-area: 1 / 4 / 2 / 6; 
            background-color: #7986cb; /* Deeper blue for contrast while remaining soft */
            color: white; 
        }
        form {
            display: flex;
            flex-direction: column;
        }
        label, input {
            margin-bottom: 10px;
        }
        input[type="button"] {
            cursor: pointer;
            background-color: #64b5f6; /* Button color that stands out yet remains within the palette */
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px; /* Rounded corners for buttons */
            transition: background-color 0.3s ease; /* Smooth transition for button on hover */
        }
        input[type="button"]:hover {
            background-color: #42a5f5; /* Slightly darker shade on hover for feedback */
        }
    </style>
</head>

<script>
    async function fetchPatientData() {
        const patientId = document.getElementById('patientId').value;
        const response = await fetch('http://localhost:8000/fetch-patient', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `patientId=${encodeURIComponent(patientId)}`
        });
        if (response.ok) {
            const patientData = await response.json();
            document.getElementById('patientInfo').innerHTML = `Patient's Name: ${patientData.name}<br>Patient's Age: ${patientData.age}`;
        } else {
            console.error('Failed to fetch patient data');
            document.getElementById('patientInfo').innerHTML = 'Failed to retrieve patient data.';
        }
    }
    
    document.addEventListener('DOMContentLoaded', (event) => {
        // The WebSocket endpoint from the second script is used as it appears to be more updated or specific.
        const ws = new WebSocket("ws://localhost:8000/ws"); 
        ws.onmessage = function(event) {
            const message = JSON.parse(event.data);
            
            // Handling for time update messages
            if (message.type && message.type === "timeUpdate") {
                document.getElementById('current').innerText = message.content;
            }
            
            // Additional handling for instructions to update div1
            if (message.action && message.action === "updateDiv" && message.divId === 1) {
                const div = document.querySelector('.div1');
                if (div) {
                    div.innerHTML = message.content;
                }
            }
        };
    });
   

    setInterval(updateCurrentTime, 1000); // Call updateCurrentTime every 10 seconds


    // Call it once initially to show the time immediately before the first 10-second interval passes
    updateCurrentTime();

</script>

    


<head>


<body>

    <div class="parent">
            <h3>Patient Selection Form</h3>
            <div class="div1" id="notification">Awainting patient id. Try : "9408b549-8bdb-4d5b-8e93-f5d04799fe95" </div>
        <div class="div2">Patient monitoring</div>
        <div class="div3" id="current">Current label</div>
        <div class="div4">
            <h3>Patient Selection Form</h3>
            <form id="fhirForm">
                <label for="patientId">Patient ID:</label>
                <input type="text" id="patientId" name="patientId" required>
                <input type="button" value="Fetch Patient Data" onclick="fetchPatientData()">
            </form>
        </div>
        <div class="div5" id="patientInfo">Patient INFO</div> 
    </div>
    
    </body>
</html> 


